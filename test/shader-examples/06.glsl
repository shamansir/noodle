// https://www.shadertoy.com/view/DtffDr

#ifdef GL_ES
precision lowp float;
#endif
vec4 buf[8];
uniform float speed;
uniform float intensity;

vec4 sigmoid(vec4 x) {
    return 1. / (1. + exp(-x));
    }
vec4 cppn_fn(vec2 coordinate, float in0, float in1, float in2) {

//layer 1 *********************************************************************
buf[6] = vec4(coordinate.x, coordinate.y, 0.5 + in0, 0.5 + in1);
buf[7] = vec4(0.5 + in2, sqrt(coordinate.x * coordinate.x + coordinate.y * coordinate.y), 0., 0.);
// layer 2 ********************************************************************
buf[0] = mat4(vec4(0.15798935, -2.8230245, -4.0485225, 5.559854), vec4(-3.8132567, -2.0905786, 0.8464008, -0.35414496), vec4(0.49835995, 1.0014901, -1.8165525, 6.8927507), vec4(1.1554208, -6.040754, 4.0498004, -26.003893))
* buf[6]
+ mat4(vec4(-0.6215526, 1.3650414, 3.866982, -21.346378), vec4(-1.5024208, -2.6894457, 1.3878456, 4.068565), vec4(0.0, 0.0, 0.0, 0.0), vec4(0.0, 0.0, 0.0, 0.0))
* buf[7]
+ vec4(-1.1714991, 0.8633618, -2.832041, 5.341836);
buf[1] = mat4(vec4(3.6728961, 3.4556406, 1.2890948, -0.891091), vec4(-1.1152683, -0.18824871, 1.324573, 0.7986717), vec4(1.0294274, -2.1620352, -1.186587, 2.3083494), vec4(-3.5140219, 4.535539, 2.2479877, -5.571291))
* buf[6]
+ mat4(vec4(0.16222078, -5.2829113, -5.244061, 4.105125), vec4(1.3442137, 1.7572293, -0.5369359, -0.12125793), vec4(0.0, 0.0, 0.0, 0.0), vec4(0.0, 0.0, 0.0, 0.0))
* buf[7]
+ vec4(0.8421427, -2.9303784, 0.8615611, -1.4667383);

buf[0] = sigmoid(buf[0]);
buf[1] = sigmoid(buf[1]);
// layer 3 ********************************************************************
buf[2] = mat4(vec4(-4.6698623, -1.0911214, 3.5526507, 6.221412), vec4(2.4494207, 1.6892289, -0.104415156, 1.4818819), vec4(2.4043498, 0.7167579, -2.9262938, 1.390429), vec4(-2.6370418, -0.9565374, 6.378253, -1.2293282))
* buf[6]
+ mat4(vec4(-1.8213294, -3.5311048, -7.43784, -0.41914323), vec4(-1.0104917, -3.137278, -0.83638984, 0.28319156), vec4(0.0, 0.0, 0.0, 0.0), vec4(0.0, 0.0, 0.0, 0.0))
* buf[7]
+ vec4(2.3352578, 1.2006032, -2.0227838, -2.0087633);
buf[3] = mat4(vec4(-4.458836, -1.2162573, 6.062383, -2.6813662), vec4(-0.5508846, -0.31054375, -0.16497393, 2.2833538), vec4(-3.9579265, 0.3380532, -1.5743831, -0.63811773), vec4(1.0462208, -0.7786392, -1.9073483, -0.3884209))
* buf[6]
+ mat4(vec4(-14.606563, -2.0753143, -4.133394, 3.8478277), vec4(-0.4067336, 1.4517672, 0.799758, -0.49689233), vec4(0.0, 0.0, 0.0, 0.0), vec4(0.0, 0.0, 0.0, 0.0))
* buf[7]
+ vec4(5.6508045, -1.5497028, -2.5208669, 0.6735321);
buf[2] = sigmoid(buf[2]);
buf[3] = sigmoid(buf[3]);

// layer 4 *******************************************************************
// implemented as a part of layers 2 and 3
// layer 5 and 6 ********************************************************************
buf[4] = mat4(vec4(-1.5088892, 5.845585, 4.481823, -5.0443144), vec4(7.849486, 4.1395445, -6.5602446, 1.1036118), vec4(6.6682606, -11.55753, 4.763195, 1.455906), vec4(0.017175646, -366.15158, -80.29134, -2.5276334))
* buf[0]
+ mat4(vec4(2.775591, 7.2307186, -9.028725, 5.7900815), vec4(-7.446412, 7.9065814, -9.783361, 1.2135185), vec4(-1.9590125, -22.139872, -15.785561, -3.513498), vec4(-4.946649, -1.2779664, 7.221207, -11.093107))
* buf[1]
+ mat4(vec4(-3.5154085, -12.085035, -7.5107594, -1.8339653), vec4(0.8341089, -8.585301, 13.7843485, -0.3522785), vec4(-4.9421854, 3.1185641, 10.40273, -11.730778), vec4(0.9312287, -10.028536, 5.02363, 0.81166613))
* buf[2]
+ mat4(vec4(0.8054617, 1.3852259, -0.91636896, 0.9319674), vec4(-3.815979, 0.03928483, 2.3691566, 8.696806), vec4(-1.5852077, -62.445934, -11.393516, -8.756885), vec4(-1.2853988, 13.212772, -1.6257201, -5.2855825))
* buf[3]
+ vec4(2.241785, -1.8314902, 0.83580786, 9.41169);
buf[5] = mat4(vec4(0.26124564, 6.4376264, 11.645624, -2.8494694), vec4(-7.9993377, -8.9802, -2.7911298, -3.5069635), vec4(6.4628253, -18.243145, -3.9762654, -0.20418885), vec4(-4.22456, -2.4636898, 3.7532065, 1.8742566))
* buf[0]
+ mat4(vec4(-6.075564, -6.252802, 1.1957424, -1.4090719), vec4(-5.8203125, -4.739796, 8.486904, -0.13786879), vec4(6.7216825, 18.72611, 6.00507, 1.4542285), vec4(-0.95993805, 9.570557, 2.153824, 3.378236))
* buf[1]
+ mat4(vec4(1.6772522, -0.61022216, 7.091971, -1.2360073), vec4(1.236706, -4.970267, -2.2008255, 1.9552149), vec4(3.094974, -4.8698525, 0.40880343, 3.1228032), vec4(8.188464, -3.8818061, -5.5546713, 1.131158))
* buf[2]
+ mat4(vec4(-6.1965737, -7.745663, -7.318301, -1.0420072), vec4(8.857743, 17.735998, -4.3147907, 2.8744252), vec4(-1.0132635, 0.06596738, 4.7702694, 2.134518), vec4(-5.455057, 7.070823, -0.75690097, -3.3348205))
* buf[3]
+ vec4(-1.4140449, -0.085510485, -7.5318046, -1.6154095);
buf[4] = sigmoid(buf[4]);
buf[5] = sigmoid(buf[5]);
// layer 7 and 8 ********************************************************************
buf[6] = mat4(vec4(-15.606012, 5.667645, 15.556916, 5.948859), vec4(-23.811289, -57.638504, 1.2856681, 12.969466), vec4(7.5690074, 0.24498177, -11.368519, -4.0175567), vec4(0.13595544, -12.263578, -36.79266, -0.3176781))
* buf[0]
+ mat4(vec4(-12.067775, -19.733822, 0.0043875263, 5.9834905), vec4(33.6138, 52.55488, 1.0298972, -20.974585), vec4(16.112684, -23.121197, -40.257607, -8.971476), vec4(17.31965, 62.36546, -22.440826, -10.198179))
* buf[1]
+ mat4(vec4(3.4817746, 5.599132, 23.838358, -2.4724288), vec4(-21.209898, 9.769347, 116.00354, 5.175677), vec4(-43.51304, 12.676538, -21.77549, 23.987005), vec4(3.9821281, -14.006245, 11.864449, -1.2515826))
* buf[2]
+ mat4(vec4(5.8689327, 26.391949, 8.38064, -3.0373583), vec4(18.201714, -12.485214, 9.515582, -9.936555), vec4(8.737038, 42.395084, -98.84307, -7.2060304), vec4(-4.8353596, -57.75659, 34.090992, -0.76057786))
* buf[3]
+ mat4(vec4(17.897236, 57.418888, -25.817692, -12.854139), vec4(-333.43958, 12.474519, -22.928097, 17.587284), vec4(-11.044223, -21.18064, -7.4664016, 6.4900517), vec4(-11.78397, -3.8222384, 2.2361667, 5.8452854))
* buf[4]
+ mat4(vec4(5.482705, 30.97732, -14.342825, -4.541368), vec4(11.686139, -9.402538, 82.86699, -6.3102694), vec4(-1.7510675, -17.70653, 10.38284, 2.4797828), vec4(3.1584928, -40.417427, 136.6705, -5.2708864))
* buf[5]
+ vec4(-15.636082, -0.9774143, 27.575691, 13.590046);
buf[7] = mat4(vec4(-12.8582325, -2.9760349, -2.3565636, 1.3976682), vec4(-24.342659, -50.560776, 22.960861, -16.405113), vec4(5.6498, 6.356693, 0.69697034, 4.604504), vec4(0.27611026, 1.6578561, 0.5002827, 12.335777))
* buf[0]
+ mat4(vec4(-16.244108, -2.5964715, -0.71730274, 45.548206), vec4(33.55436, 41.571148, -11.721937, -31.528742), vec4(15.379328, -4.298718, 6.320234, 10.113711), vec4(21.241781, 26.57794, -11.671681, -117.27091))
* buf[1]
+ mat4(vec4(2.8117876, 13.437091, -6.246424, 28.993223), vec4(-29.683706, 15.721599, -9.946332, 23.786804), vec4(-40.6083, -34.22501, 9.716796, 2.6428268), vec4(5.6238184, -8.240437, 5.2400737, -8.701217))
* buf[2]
+ mat4(vec4(6.7769103, 2.3559186, -0.38412517, -37.505245), vec4(18.00992, 34.09309, -17.375113, 8.279464), vec4(14.305624, 4.497131, 5.333335, -42.415443), vec4(-5.0491214, 17.764696, -11.60667, -7.746662))
* buf[3]
+ mat4(vec4(16.946154, 27.063385, -5.7845497, -52.55618), vec4(10.664927, -3.026725, 3.6823318, 12.044233), vec4(-11.567659, -21.509024, 9.306608, 11.384696), vec4(-11.833156, -9.6116495, 2.2288175, -7.5740767))
* buf[4]
+ mat4(vec4(8.126379, 14.71315, -6.240784, -9.104209), vec4(14.132395, 1.3763108, 4.0824256, -17.804401), vec4(1.3440549, -12.342699, 5.3685203, -2.5711007), vec4(-3.2289567, 41.25341, -24.157688, 51.192547))
* buf[5]
+ vec4(-18.787123, -29.089497, 4.4133987, 40.31439);
buf[6] = sigmoid(buf[6]);
buf[7] = sigmoid(buf[7]);

// layer 9 ********************************************************************
buf[0] = mat4(vec4(-0.37223837, 0.21939822, -0.1415498, 0.0), vec4(-2.106104, 0.19532442, 0.22481734, 0.0), vec4(0.4536551, -0.25022385, 0.016776657, 0.0), vec4(0.07051695, -0.11261972, 0.038539752, 0.0))
* buf[0]
+ mat4(vec4(-1.1898454, 0.14878118, 0.19612461, 0.0), vec4(2.766664, -0.7235617, -0.19985063, 0.0), vec4(-1.8502979, -0.82161206, -0.1178217, 0.0), vec4(1.8479801, -0.012557047, -0.27770618, 0.0))
* buf[1]
+ mat4(vec4(0.2225743, -0.1985513, 0.03712178, 0.0), vec4(0.4275036, 0.49749967, -0.06294606, 0.0), vec4(-0.050370935, 1.5264646, 0.30295664, 0.0), vec4(0.42175412, -0.3656762, -0.16419275, 0.0))
* buf[2]
+ mat4(vec4(1.1564953, 0.10743775, -0.07100872, 0.0), vec4(-0.17357533, -0.63636285, -0.25206563, 0.0), vec4(0.8195995, -0.40993538, -0.0032088961, 0.0), vec4(-1.0819085, -0.7051479, -0.06533896, 0.0))
* buf[3]
+ mat4(vec4(3.503318, 0.15870234, -0.29349273, 0.0), vec4(1.3844607, 0.43712336, 0.030473951, 0.0), vec4(-0.6053073, 0.31924763, 0.16967534, 0.0), vec4(-0.37950155, 0.28001186, 0.073448956, 0.0))
* buf[4]
+ mat4(vec4(0.80314213, 0.015278891, -0.16087158, 0.0), vec4(0.88083446, -0.24595416, 0.027351934, 0.0), vec4(-0.4420246, 0.16092822, 0.075462736, 0.0), vec4(-0.27461016, -0.5868031, -0.24838275, 0.0))
* buf[5]
+ mat4(vec4(-1.0109457, -0.89803195, -2.6106067, 0.0), vec4(-0.9218671, -0.39734232, 0.0750759, 0.0), vec4(15.82821, 9.525322, 3.4267645, 0.0), vec4(2.1332054, 1.3592621, -1.978056, 0.0))
* buf[6]
+ mat4(vec4(1.2464583, -1.6644447, -2.5020704, 0.0), vec4(-4.505297, -0.79907095, 0.47479317, 0.0), vec4(-46.21531, -15.580507, -4.5369325, 0.0), vec4(1.4000291, 0.4096961, -0.04745275, 0.0))
* buf[7]
+ vec4(-17.10207, -7.911692, -1.3436741, 0.0);
buf[0] = sigmoid(buf[0]);
return vec4(buf[0].x , buf[0].y , buf[0].z, 1);
}

void mainImage( out vec4 fragColor, in vec2 fragCoord ) {
    // Normalized pixel coordinates (from -1 to 1)
    vec2 uv = fragCoord/iResolution.xy * 2. - 1.;
    uv.y *= -1.;

    // Output to screen
    fragColor = cppn_fn(uv, intensity * 0.1 * sin(0.3 * iTime * speed), intensity * 0.1 * sin(0.69 * iTime * speed), intensity * 0.1 * sin(0.44 * iTime * speed));
}